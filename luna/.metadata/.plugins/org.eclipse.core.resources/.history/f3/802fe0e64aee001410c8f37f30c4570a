package panelespack;

import javax.swing.JPanel;

import org.apache.logging.log4j.LogManager;
import org.apache.logging.log4j.Logger;

import irrisoftpack.Irrisoft;
import irrisoftpack.IrrisoftConstantes;

import javax.swing.JButton;
import javax.swing.JSeparator;
import javax.swing.JLabel;
import java.awt.Font;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import javax.swing.border.LineBorder;
import javax.swing.UIManager;
import javax.swing.border.TitledBorder;

public class Panelecturas extends JPanel {

    /**
     * 
     */
    private static final long serialVersionUID = 7454182365055831222L;

    private static Logger logger = LogManager.getLogger(Panelecturas.class
	    .getName());

    // SINGLETON
    private static Panelecturas instance;
    private Irrisoft IR;

    public static Panelecturas getInstance() {

	if (instance == null) {
	    instance =  new Panelecturas();
	}
	return instance;
    }

    // Botones
    private JButton btnmci1, btnmci2, btnmci3, btnmci4, btnbt21, btnbt22,
	    btnbt23, btnbt24, btnplaca_sens;
    private JLabel lblicono;

    private Panelecturas() {
	super();
	setBorder(new TitledBorder(null, "Lecturas sensores", TitledBorder.LEADING, TitledBorder.TOP, null, null));
	this.IR = Irrisoft.window;
	this.setBounds((IR.panelizq.getWidth()/2)-225, 150, 465, 347);
	setLayout(null);

	btnmci1 = new JButton("MCI1");
	btnmci1.setBounds(12, 106, 87, 25);
	add(btnmci1);

	btnmci2 = new JButton("MCI2");
	btnmci2.setBounds(131, 106, 87, 25);
	add(btnmci2);

	btnmci3 = new JButton("MCI3");
	btnmci3.setBounds(248, 106, 87, 25);
	add(btnmci3);

	btnmci4 = new JButton("MCI4");
	btnmci4.setBounds(366, 106, 87, 25);
	add(btnmci4);

	btnbt21 = new JButton("BT2-1");
	btnbt21.setBounds(12, 183, 87, 25);
	add(btnbt21);

	btnbt22 = new JButton("BT2-2");
	btnbt22.setBounds(131, 183, 87, 25);
	add(btnbt22);

	btnbt23 = new JButton("BT2-3");
	btnbt23.setBounds(248, 183, 87, 25);
	add(btnbt23);

	btnbt24 = new JButton("BT2-4");
	btnbt24.setBounds(366, 183, 87, 25);
	add(btnbt24);

	btnplaca_sens = new JButton("Placa sensores");
	btnplaca_sens.setBounds(14, 234, 439, 50);
	add(btnplaca_sens);

	JSeparator separator = new JSeparator();
	separator.setBounds(12, 220, 441, 2);
	add(separator);

	JSeparator separator_1 = new JSeparator();
	separator_1.setBounds(12, 143, 441, 2);
	add(separator_1);

	JLabel lblPlacasmci = new JLabel("Placas MCI");
	lblPlacasmci.setFont(new Font("Dialog", Font.BOLD | Font.ITALIC, 12));
	lblPlacasmci.setBounds(12, 79, 111, 15);
	add(lblPlacasmci);

	JLabel lblPlacasBt = new JLabel("Placas BT2");
	lblPlacasBt.setFont(new Font("Dialog", Font.BOLD | Font.ITALIC, 12));
	lblPlacasBt.setBounds(12, 156, 111, 15);
	add(lblPlacasBt);

//	JLabel lblTitulo = new JLabel("Lecturas Sensores");
//	lblTitulo.setFont(new Font("Dialog", Font.BOLD | Font.ITALIC, 14));
//	lblTitulo.setBounds(124, 17, 146, 25);
//	add(lblTitulo);

	JSeparator separator_2 = new JSeparator();
	separator_2.setBounds(12, 65, 441, 2);
	add(separator_2);

	JSeparator separator_3 = new JSeparator();
	separator_3.setBounds(12, 296, 441, 2);
	add(separator_3);

	// BOTON ATRAS
	JButton btnAtras = new JButton("Atras");
	btnAtras.setBounds(179, 310, 117, 25);
	btnAtras.addActionListener(new ActionListener() {
	    public void actionPerformed(ActionEvent arg0) {
		IR.panelecturas.setVisible(false);
		IR.panelizq.setVisible(true);
		
	    }
	});
	add(btnAtras);
	
	lblicono = new JLabel("");
	lblicono.setBounds(211, 12, 50, 48);
	IR.redimensionado_jlabel(lblicono, "/irrisoftpack/imagenes/sensores.png");
	add(lblicono);


    }

    /**
     * Para habilitar o deshabilitar los botones de placas dependiendo de la
     * info de config
     **/

    public void habilitabotones() {


	if (IR.sensmci == true) {
	    btnmci1.setEnabled(true);
	    btnmci1.addMouseListener(new MouseAdapter() {

		public void mouseClicked(MouseEvent e) {
		    //Instancio el panel lecturas (MCI-1) al pulsar el boton.
		    IR.panelecturasmci = Panelecturasmci.getInstance();
		    // Buclo popr los sensores para añadir los listeners
		    // necesarios
		    for (int i = 0; i < IR.sensores.size(); i++) {
			if (IR.sensores.get(i).getNum_placa() == IrrisoftConstantes.PLACA_MCI_1) {
			    IR.sensores.get(i).setLectura("");
			    IR.sensores.get(i).setPulsos(-1);
			    IR.sensores.get(i).addPropertyChangeListener(
				    "pulsos", IR.panelecturasmci);
			    IR.sensores.get(i).addPropertyChangeListener(
				    "lectura", IR.panelecturasmci);
			    
			    if(IR.sensores.get(i).getNum_sensor().contains("Am")){
				
			    }
			    
			    
			}
		    }
		   
		    // Aki se llama al panelecturas
		    IR.panelecturas.setVisible(false);
		    IR.panelecturasmci.getLbltitulo().setText("PLACA MCI 1");
		    IR.panelecturasmci.repaint();
		    IR.frmIrrisoft.getContentPane().add(IR.panelecturasmci);
		    IR.panelecturasmci.setVisible(true);

		}
	    });
	} else
	    btnmci1.setEnabled(false);

	if (IR.sensmci2 == true) {
	    btnmci2.setEnabled(true);
	    btnmci2.addMouseListener(new MouseAdapter() {

		public void mouseClicked(MouseEvent e) {

		    //Instancio el panel lecturas (MCI-2) al pulsar el boton.
		    IR.panelecturasmci = Panelecturasmci.getInstance();
		    // Buclo popr los sensores para añadir los listeners
		    // necesarios
		    for (int i = 0; i < IR.sensores.size(); i++) {
			if (IR.sensores.get(i).getNum_placa() == IrrisoftConstantes.PLACA_MCI_2) {
			    IR.sensores.get(i).setLectura("");
			    IR.sensores.get(i).setPulsos(-1);
			    IR.sensores.get(i).addPropertyChangeListener(
				    "pulsos", IR.panelecturasmci);
			    IR.sensores.get(i).addPropertyChangeListener(
				    "lectura", IR.panelecturasmci);
			}
		    }
		    // Aki se llama al panelecturas

		    IR.panelecturas.setVisible(false);
		    IR.panelecturasmci.getLbltitulo().setText("PLACA MCI 2");
		    IR.panelecturasmci.repaint();
		    IR.frmIrrisoft.getContentPane().add(IR.panelecturasmci);
		    IR.panelecturasmci.setVisible(true);

		}
	    });
	} else
	    btnmci2.setEnabled(false);

	if (IR.sensmci3 == true) {
	    btnmci3.setEnabled(true);
	    btnmci3.addMouseListener(new MouseAdapter() {

		
		public void mouseClicked(MouseEvent e) {

		    //Instancio el panel lecturas (MCI-3) al pulsar el boton.
		    IR.panelecturasmci = Panelecturasmci.getInstance();
		    // Buclo popr los sensores para añadir los listeners
		    // necesarios
		    for (int i = 0; i < IR.sensores.size(); i++) {
			if (IR.sensores.get(i).getNum_placa() == IrrisoftConstantes.PLACA_MCI_3) {
			    IR.sensores.get(i).setLectura("");
			    IR.sensores.get(i).setPulsos(-1);
			    IR.sensores.get(i).addPropertyChangeListener(
				    "pulsos", IR.panelecturasmci);
			    IR.sensores.get(i).addPropertyChangeListener(
				    "lectura", IR.panelecturasmci);
			}
		    }
		    // Aki se llama al panelecturas

		    IR.panelecturas.setVisible(false);
		    IR.panelecturasmci.getLbltitulo().setText("PLACA MCI 3");
		    IR.panelecturasmci.repaint();
		    IR.frmIrrisoft.getContentPane().add(IR.panelecturasmci);
		    IR.panelecturasmci.setVisible(true);

		}
	    });
	} else
	    btnmci3.setEnabled(false);

	if (IR.sensmci4 == true) {
	    btnmci4.setEnabled(true);
	    btnmci4.addMouseListener(new MouseAdapter() {

		public void mouseClicked(MouseEvent e) {

		    //Instancio el panel lecturas (MCI-4) al pulsar el boton.
		    IR.panelecturasmci = Panelecturasmci.getInstance();
		    // Buclo popr los sensores para añadir los listeners
		    // necesarios
		    for (int i = 0; i < IR.sensores.size(); i++) {
			if (IR.sensores.get(i).getNum_placa() == IrrisoftConstantes.PLACA_MCI_4) {
			    IR.sensores.get(i).setLectura("");
			    IR.sensores.get(i).setPulsos(-1);
			    IR.sensores.get(i).addPropertyChangeListener(
				    "pulsos", IR.panelecturasmci);
			    IR.sensores.get(i).addPropertyChangeListener(
				    "lectura", IR.panelecturasmci);
			}
		    }
		    // Aki se llama al panelecturas

		    IR.panelecturas.setVisible(false);
		    IR.panelecturasmci.getLbltitulo().setText("PLACA MCI 4");
		    IR.panelecturasmci.repaint();
		    IR.frmIrrisoft.getContentPane().add(IR.panelecturasmci);
		    IR.panelecturasmci.setVisible(true);

		}
	    });
	} else
	    btnmci4.setEnabled(false);

	if (IR.sensbt2 == true) { // Revisar comportamiento y
				  // necesidad del hiloinfo en bt2

	    btnbt21.setEnabled(true);
	    btnbt21.addMouseListener(new MouseAdapter() {

		public void mouseClicked(MouseEvent e) {
		    
		    //Instancio el panel lecturas (BT2-1) al pulsar el boton.
		    IR.panelecturasbt2 = Panelecturasbt2.getInstance();
		    // Buclo ppr los sensores para añadir los listeners
		    // necesarios
		    for (int i = 0; i < IR.sensores.size(); i++) {
			if (IR.sensores.get(i).getNum_placa() == IrrisoftConstantes.PLACA_BT2_5) {
			    IR.sensores.get(i).setLectura("");
			    IR.sensores.get(i).setPulsos(-1);
			    IR.sensores.get(i).addPropertyChangeListener(
				    "pulsos", IR.panelecturasbt2);
			    IR.sensores.get(i).addPropertyChangeListener(
				    "lectura", IR.panelecturasbt2);
			    
			    if(IR.sensores.get(i).getNum_sensor().contains("Am")){
				IR.panelecturasbt2.getLblamperimetro().setText("Amperimetro -");
				IR.panelecturasbt2.getGraficaAmp().setEnabled(true);
				IR.panelecturasbt2.getGraficaAmp().setVisible(true);
			    }
			
			    if(IR.sensores.get(i).getNum_sensor().contains("Pu")){
				IR.panelecturasbt2.getLblcaudalimetro().setText("Caudalimetro -");
				IR.panelecturasbt2.getBtnGrafica().setEnabled(true);
				IR.panelecturasbt2.getBtnGrafica().setVisible(true);
				IR.panelecturasbt2.getBtnGraficaPulsos().setEnabled(true);
				IR.panelecturasbt2.getBtnGraficaPulsos().setVisible(true);
			    }
			    
			    if(IR.sensores.get(i).getNum_borna() == 2){
				IR.panelecturasbt2.getLblsensor1().setText(IR.sensores.get(i).getNum_sensor()+":");
				IR.panelecturasbt2.getButtonSensor1().setEnabled(true);
				IR.panelecturasbt2.getButtonSensor1().setVisible(true);
			    }
			    if(IR.sensores.get(i).getNum_borna() == 3){
				IR.panelecturasbt2.getLblsensor2().setText(IR.sensores.get(i).getNum_sensor()+":");
				IR.panelecturasbt2.getButtonSensor2().setEnabled(true);
				IR.panelecturasbt2.getButtonSensor2().setVisible(true);
			    }
			    if(IR.sensores.get(i).getNum_borna() == 4){				
				IR.panelecturasbt2.getLblsensor3().setText(IR.sensores.get(i).getNum_sensor()+":");
				IR.panelecturasbt2.getButtonSensor3().setEnabled(true);
				IR.panelecturasbt2.getButtonSensor3().setVisible(true);
			    }
			    if(IR.sensores.get(i).getNum_borna() == 5){
				IR.panelecturasbt2.getLblsensor4().setText(IR.sensores.get(i).getNum_sensor()+":");
				IR.panelecturasbt2.getButtonSensor4().setEnabled(true);
				IR.panelecturasbt2.getButtonSensor4().setVisible(true);
			    }
			    if(IR.sensores.get(i).getNum_borna() == 6){
				IR.panelecturasbt2.getLblsensor5().setText(IR.sensores.get(i).getNum_sensor()+":");
				IR.panelecturasbt2.getButtonSensor5().setEnabled(true);
				IR.panelecturasbt2.getButtonSensor5().setVisible(true);
			    }
			    if(IR.sensores.get(i).getNum_borna() == 7){
				IR.panelecturasbt2.getLblsensor6().setText(IR.sensores.get(i).getNum_sensor()+":");
				IR.panelecturasbt2.getButtonSensor6().setEnabled(true);
				IR.panelecturasbt2.getButtonSensor6().setVisible(true);
			    }
			    if(IR.sensores.get(i).getNum_borna() == 8){
				IR.panelecturasbt2.getLblsensor7().setText(IR.sensores.get(i).getNum_sensor()+":");
				IR.panelecturasbt2.getButtonSensor7().setEnabled(true);
				IR.panelecturasbt2.getButtonSensor7().setVisible(true);
			    }

			}
		    }

		    // Aki se llama al panelecturas
		    IR.panelecturas.setVisible(false);
		    IR.panelecturasbt2.getLbltitulo().setText("PLACA BT2-1");
		    IR.panelecturasbt2.repaint();
		    IR.frmIrrisoft.getContentPane().add(IR.panelecturasbt2);
		    //IR.panelecturasbt2.repaint();
		    IR.panelecturasbt2.setVisible(true);

		}
	    });
	} else
	    btnbt21.setEnabled(false);

	if (IR.sensbt22 == true) {
	    btnbt22.setEnabled(true);
	    btnbt22.addMouseListener(new MouseAdapter() {

		public void mouseClicked(MouseEvent e) {

		    //Instancio el panel lecturas (BT2-2) al pulsar el boton.
		    IR.panelecturasbt2 = Panelecturasbt2.getInstance();
		    // Buclo por los sensores para añadir los listeners
		    // necesarios
		    for (int i = 0; i < IR.sensores.size(); i++) {
			if (IR.sensores.get(i).getNum_placa() == IrrisoftConstantes.PLACA_BT2_6) {
			    IR.sensores.get(i).setLectura("");
			    IR.sensores.get(i).setPulsos(-1);
			    IR.sensores.get(i).addPropertyChangeListener(
				    "pulsos", IR.panelecturasbt2);
			    IR.sensores.get(i).addPropertyChangeListener(
				    "lectura", IR.panelecturasbt2);
			    if(IR.sensores.get(i).getNum_sensor().contains("Am")){
				IR.panelecturasbt2.getLblamperimetro().setText("Amperimetro - ");
				IR.panelecturasbt2.getGraficaAmp().setEnabled(true);
				IR.panelecturasbt2.getGraficaAmp().setVisible(true);
			    }
			    
			    if(IR.sensores.get(i).getNum_sensor().contains("Pu")){
				IR.panelecturasbt2.getLblcaudalimetro().setText("Caudalimetro - ");
				IR.panelecturasbt2.getBtnGrafica().setEnabled(true);
				IR.panelecturasbt2.getBtnGrafica().setVisible(true);
				IR.panelecturasbt2.getBtnGraficaPulsos().setEnabled(true);
				IR.panelecturasbt2.getBtnGraficaPulsos().setVisible(true);
			    }
			    
			    if(IR.sensores.get(i).getNum_borna() == 2){
				IR.panelecturasbt2.getLblsensor1().setText(IR.sensores.get(i).getNum_sensor()+":");
				IR.panelecturasbt2.getButtonSensor1().setEnabled(true);
				IR.panelecturasbt2.getButtonSensor1().setVisible(true);
			    }
			    if(IR.sensores.get(i).getNum_borna() == 3){
				IR.panelecturasbt2.getLblsensor2().setText(IR.sensores.get(i).getNum_sensor()+":");
				IR.panelecturasbt2.getButtonSensor2().setEnabled(true);
				IR.panelecturasbt2.getButtonSensor2().setVisible(true);
			    }
			    if(IR.sensores.get(i).getNum_borna() == 4){				
				IR.panelecturasbt2.getLblsensor3().setText(IR.sensores.get(i).getNum_sensor()+":");
				IR.panelecturasbt2.getButtonSensor3().setEnabled(true);
				IR.panelecturasbt2.getButtonSensor3().setVisible(true);
			    }
			    if(IR.sensores.get(i).getNum_borna() == 5){
				IR.panelecturasbt2.getLblsensor4().setText(IR.sensores.get(i).getNum_sensor()+":");
				IR.panelecturasbt2.getButtonSensor4().setEnabled(true);
				IR.panelecturasbt2.getButtonSensor4().setVisible(true);
			    }
			    if(IR.sensores.get(i).getNum_borna() == 6){
				IR.panelecturasbt2.getLblsensor5().setText(IR.sensores.get(i).getNum_sensor()+":");
				IR.panelecturasbt2.getButtonSensor5().setEnabled(true);
				IR.panelecturasbt2.getButtonSensor5().setVisible(true);
			    }
			    if(IR.sensores.get(i).getNum_borna() == 7){
				IR.panelecturasbt2.getLblsensor6().setText(IR.sensores.get(i).getNum_sensor()+":");
				IR.panelecturasbt2.getButtonSensor6().setEnabled(true);
				IR.panelecturasbt2.getButtonSensor6().setVisible(true);
			    }
			    if(IR.sensores.get(i).getNum_borna() == 8){
				IR.panelecturasbt2.getLblsensor7().setText(IR.sensores.get(i).getNum_sensor()+":");
				IR.panelecturasbt2.getButtonSensor7().setEnabled(true);
				IR.panelecturasbt2.getButtonSensor7().setVisible(true);
			    }
			}
		    }
		    // Aki se llama al panelecturas

		    IR.panelecturas.setVisible(false);
		    IR.panelecturasbt2.getLbltitulo().setText("PLACA BT2-2");
		    IR.panelecturasbt2.repaint();
		    IR.frmIrrisoft.getContentPane().add(IR.panelecturasbt2);
		    //IR.panelecturasbt2.repaint();
		    IR.panelecturasbt2.setVisible(true);

		}
	    });
	} else
	    btnbt22.setEnabled(false);

	if (IR.sensbt23 == true) {
	    btnbt23.setEnabled(true);
	    btnbt23.addMouseListener(new MouseAdapter() {

		public void mouseClicked(MouseEvent e) {

		    //Instancio el panel lecturas (BT2-3) al pulsar el boton.
		    IR.panelecturasbt2 = Panelecturasbt2.getInstance();
		    // Buclo por los sensores para añadir los listeners
		    // necesarios
		    for (int i = 0; i < IR.sensores.size(); i++) {
			if (IR.sensores.get(i).getNum_placa() == IrrisoftConstantes.PLACA_BT2_7) {
			    IR.sensores.get(i).setLectura("");
			    IR.sensores.get(i).setPulsos(-1);
			    IR.sensores.get(i).addPropertyChangeListener(
				    "pulsos", IR.panelecturasbt2);
			    IR.sensores.get(i).addPropertyChangeListener(
				    "lectura", IR.panelecturasbt2);
			    
			    if(IR.sensores.get(i).getNum_sensor().contains("Am")){
				IR.panelecturasbt2.getLblamperimetro().setText("Amperimetro -");
				IR.panelecturasbt2.getGraficaAmp().setEnabled(true);
				IR.panelecturasbt2.getGraficaAmp().setVisible(true);
			    }
			    
			    if(IR.sensores.get(i).getNum_sensor().contains("Pu")){
				IR.panelecturasbt2.getLblcaudalimetro().setText("Caudalimetro -");
				IR.panelecturasbt2.getBtnGrafica().setEnabled(true);
				IR.panelecturasbt2.getBtnGrafica().setVisible(true);
				IR.panelecturasbt2.getBtnGraficaPulsos().setEnabled(true);
				IR.panelecturasbt2.getBtnGraficaPulsos().setVisible(true);
			    }
			    
			    if(IR.sensores.get(i).getNum_borna() == 2){
				IR.panelecturasbt2.getLblsensor1().setText(IR.sensores.get(i).getNum_sensor()+":");
				IR.panelecturasbt2.getButtonSensor1().setEnabled(true);
				IR.panelecturasbt2.getButtonSensor1().setVisible(true);
			    }
			    if(IR.sensores.get(i).getNum_borna() == 3){
				IR.panelecturasbt2.getLblsensor2().setText(IR.sensores.get(i).getNum_sensor()+":");
				IR.panelecturasbt2.getButtonSensor2().setEnabled(true);
				IR.panelecturasbt2.getButtonSensor2().setVisible(true);
			    }
			    if(IR.sensores.get(i).getNum_borna() == 4){				
				IR.panelecturasbt2.getLblsensor3().setText(IR.sensores.get(i).getNum_sensor()+":");
				IR.panelecturasbt2.getButtonSensor3().setEnabled(true);
				IR.panelecturasbt2.getButtonSensor3().setVisible(true);
			    }
			    if(IR.sensores.get(i).getNum_borna() == 5){
				IR.panelecturasbt2.getLblsensor4().setText(IR.sensores.get(i).getNum_sensor()+":");
				IR.panelecturasbt2.getButtonSensor4().setEnabled(true);
				IR.panelecturasbt2.getButtonSensor4().setVisible(true);
			    }
			    if(IR.sensores.get(i).getNum_borna() == 6){
				IR.panelecturasbt2.getLblsensor5().setText(IR.sensores.get(i).getNum_sensor()+":");
				IR.panelecturasbt2.getButtonSensor5().setEnabled(true);
				IR.panelecturasbt2.getButtonSensor5().setVisible(true);
			    }
			    if(IR.sensores.get(i).getNum_borna() == 7){
				IR.panelecturasbt2.getLblsensor6().setText(IR.sensores.get(i).getNum_sensor()+":");
				IR.panelecturasbt2.getButtonSensor6().setEnabled(true);
				IR.panelecturasbt2.getButtonSensor6().setVisible(true);
			    }
			    if(IR.sensores.get(i).getNum_borna() == 8){
				IR.panelecturasbt2.getLblsensor7().setText(IR.sensores.get(i).getNum_sensor()+":");
			    	IR.panelecturasbt2.getButtonSensor7().setEnabled(true);
			    	IR.panelecturasbt2.getButtonSensor7().setVisible(true);
			    }
			}
		    }
		    // Aki se llama al panelecturas

		    IR.panelecturas.setVisible(false);
		    IR.panelecturasbt2.getLbltitulo().setText("PLACA BT2-3");
		    IR.panelecturasbt2.repaint();
		    IR.frmIrrisoft.getContentPane().add(IR.panelecturasbt2);
		    //IR.panelecturasbt2.repaint();
		    IR.panelecturasbt2.setVisible(true);

		}
	    });
	} else
	    btnbt23.setEnabled(false);

	if (IR.sensbt24 == true) {
	    btnbt24.setEnabled(true);
	    btnbt24.addMouseListener(new MouseAdapter() {

		public void mouseClicked(MouseEvent e) {

		    //Instancio el panel lecturas (BT2-4) al pulsar el boton.
		    IR.panelecturasbt2 = Panelecturasbt2.getInstance();
		    // Buclo por los sensores para añadir los listeners
		    // necesarios
		    for (int i = 0; i < IR.sensores.size(); i++) {
			if (IR.sensores.get(i).getNum_placa() == IrrisoftConstantes.PLACA_BT2_8){
			    IR.sensores.get(i).setLectura("");
			    IR.sensores.get(i).setPulsos(-1);
			    IR.sensores.get(i).addPropertyChangeListener("pulsos", IR.panelecturasbt2);
			    IR.sensores.get(i).addPropertyChangeListener("lectura",
				IR.panelecturasbt2);
			    
			    if(IR.sensores.get(i).getNum_sensor().contains("Am")){
				IR.panelecturasbt2.getLblamperimetro().setText("Amperimetro -");
				IR.panelecturasbt2.getGraficaAmp().setEnabled(true);
				IR.panelecturasbt2.getGraficaAmp().setVisible(true);
			    }
			    
			    if(IR.sensores.get(i).getNum_sensor().contains("Pu")){
				IR.panelecturasbt2.getLblcaudalimetro().setText("Caudalimetro -");
				IR.panelecturasbt2.getBtnGrafica().setEnabled(true);
				IR.panelecturasbt2.getBtnGrafica().setVisible(true);
				IR.panelecturasbt2.getBtnGraficaPulsos().setEnabled(true);
				IR.panelecturasbt2.getBtnGraficaPulsos().setVisible(true);
			    }
			    
			    if(IR.sensores.get(i).getNum_borna() == 2){
				IR.panelecturasbt2.getLblsensor1().setText(IR.sensores.get(i).getNum_sensor()+":");
				IR.panelecturasbt2.getButtonSensor1().setEnabled(true);
				IR.panelecturasbt2.getButtonSensor1().setVisible(true);
			    }
			    if(IR.sensores.get(i).getNum_borna() == 3){
				IR.panelecturasbt2.getLblsensor2().setText(IR.sensores.get(i).getNum_sensor()+":");
				IR.panelecturasbt2.getButtonSensor2().setEnabled(true);
				IR.panelecturasbt2.getButtonSensor2().setVisible(true);
			    }
			    if(IR.sensores.get(i).getNum_borna() == 4){				
				IR.panelecturasbt2.getLblsensor3().setText(IR.sensores.get(i).getNum_sensor()+":");
				IR.panelecturasbt2.getButtonSensor3().setEnabled(true);
				IR.panelecturasbt2.getButtonSensor3().setVisible(true);
			    }
			    if(IR.sensores.get(i).getNum_borna() == 5){
				IR.panelecturasbt2.getLblsensor4().setText(IR.sensores.get(i).getNum_sensor()+":");
				IR.panelecturasbt2.getButtonSensor4().setEnabled(true);
				IR.panelecturasbt2.getButtonSensor4().setVisible(true);
			    }
			    if(IR.sensores.get(i).getNum_borna() == 6){
				IR.panelecturasbt2.getLblsensor5().setText(IR.sensores.get(i).getNum_sensor()+":");
				IR.panelecturasbt2.getButtonSensor5().setEnabled(true);
				IR.panelecturasbt2.getButtonSensor5().setVisible(true);
			    }
			    if(IR.sensores.get(i).getNum_borna() == 7){
				IR.panelecturasbt2.getLblsensor6().setText(IR.sensores.get(i).getNum_sensor()+":");
				IR.panelecturasbt2.getButtonSensor6().setEnabled(true);
				IR.panelecturasbt2.getButtonSensor6().setVisible(true);
			    }
			    if(IR.sensores.get(i).getNum_borna() == 8){
				IR.panelecturasbt2.getLblsensor7().setText(IR.sensores.get(i).getNum_sensor()+":");
				IR.panelecturasbt2.getButtonSensor7().setEnabled(true);
				IR.panelecturasbt2.getButtonSensor7().setVisible(true);
			    }
			}
		    }
		    // Aki se llama al panelecturas

		    IR.panelecturas.setVisible(false);
		    IR.panelecturasbt2.getLbltitulo().setText("PLACA BT2-4");
		    IR.panelecturasbt2.repaint();
		    IR.frmIrrisoft.getContentPane().add(IR.panelecturasbt2);
		    //IR.panelecturasbt2.repaint();
		    IR.panelecturasbt2.setVisible(true);
		    

		}
	    });
	} else
	    btnbt24.setEnabled(false);

	if (IR.hayplacasens) {
	    btnplaca_sens.setEnabled(true);
	    btnplaca_sens.addMouseListener(new MouseAdapter() {

		public void mouseClicked(MouseEvent e) {

		    //Instancio el panel lecturas (Sensores) al pulsar el boton.
		  IR.panelecturasens = Panelecturasens.getInstance();
		    // Buclo por los sensores para añadir los listeners
		    // necesarios
		    for (int i = 0; i < IR.sensores.size(); i++) {
			if (IR.sensores.get(i).getNum_placa() == IrrisoftConstantes.PLACA_SENSORES_0) {
			    IR.sensores.get(i).setLectura("");
			    IR.sensores.get(i).setPulsos(-1);
			    IR.sensores.get(i).addPropertyChangeListener(
				    "pulsos", IR.panelecturasens);
			    IR.sensores.get(i).addPropertyChangeListener(
				    "lectura", IR.panelecturasens);
			    
			    
			  
			}
		    }

		    // Aki se llama al panelecturas
		    IR.panelecturas.setVisible(false);
		    IR.panelecturasens.getLbltitulo().setText("PLACA SENSORES");
		    IR.panelecturasens.repaint();
		    IR.frmIrrisoft.getContentPane().add(IR.panelecturasens);
		    IR.panelecturasens.setVisible(true);
		}
	    });
	} else
	    btnplaca_sens.setEnabled(false);

    }
}
